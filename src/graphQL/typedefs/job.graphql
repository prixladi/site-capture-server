type ProgressItem {
  url: String!
  status: Boolean!
  errorMessage: String
}

type Job {
  id: ID!
  progress: Float!
  items: [ProgressItem!]
  status: Boolean!
  errorMessage: String
  zipFileId: String
}

type JobUpdate {
  id: ID!
  progress: Float!
  status: Boolean!
  items: ProgressItem
  errorMessage: String
  zipFileId: String
}

input NewJobInput {
  url: String!
  viewports: [ViewportInput!]!
  quality: Int!
}

type Query {
  # Gets an anonymous job created through 'Mutation { runJob }'.
  # To get job attached to specific site use 'Query { me { site { latestJob(siteId) } } }'.
  anonymousJob(id: ID!): Job
}

type Mutation {
  # Runs new job using provided data.
  runAnonymousJob(job: NewJobInput): MutationIdResult
}

type Subscription {
   # Subscribes for updates about job.
  anonymousJobUpdated(id: ID!): JobUpdate!
}
